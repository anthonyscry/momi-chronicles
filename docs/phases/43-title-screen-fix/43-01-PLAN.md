---
phase: 43-title-screen-fix
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ui/menus/title_screen.gd
autonomous: true

must_haves:
  truths:
    - "Player can start a new game from the title screen and land in the neighborhood zone"
    - "Player can continue a saved game from the title screen"
    - "Player can quit to title screen from pause menu and start/continue again"
  artifacts:
    - path: "ui/menus/title_screen.gd"
      provides: "Working New Game flow"
      contains: "change_scene_to_file"
  key_links:
    - from: "ui/menus/title_screen.gd"
      to: "world/zones/neighborhood.tscn"
      via: "scene transition after difficulty selection"
      pattern: "change_scene_to_file.*neighborhood"
---

<objective>
Fix the title screen New Game button so it actually starts the game instead of showing placeholder text.

Purpose: The main scene is title_screen.tscn. After selecting difficulty, `_show_game_start_placeholder()` displays "Game would start here!" instead of loading the neighborhood zone. New players literally cannot play the game.

Output: Working title screen where New Game → difficulty selection → neighborhood zone loads.
</objective>

<context>
@docs/STATE.md
@ui/menus/title_screen.gd
@world/zones/neighborhood.tscn
@autoloads/game_manager.gd
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix New Game to load neighborhood zone</name>
  <files>ui/menus/title_screen.gd</files>
  <action>
  Replace the `_show_game_start_placeholder()` function (lines 133-167) with a proper game start that transitions to the neighborhood zone.

  In `_on_difficulty_selected()` (line 84), the flow is:
  1. `DifficultyManager.set_difficulty(level)` — already correct
  2. `_close_difficulty_selection()` — already correct
  3. `GameManager.reset_game()` — already correct
  4. `_show_game_start_placeholder()` — THIS IS THE BUG

  Replace step 4: change `_show_game_start_placeholder()` call to:
  ```gdscript
  get_tree().change_scene_to_file("res://world/zones/neighborhood.tscn")
  ```

  Then delete the entire `_show_game_start_placeholder()` function (lines 133-167) since it's dead code — it creates a placeholder Label, a CenterContainer, and sets up an ESC handler to return to title. All of this is the bug and should be removed.

  Also clean up the dangling input handler: the placeholder function calls `set_process_unhandled_input(true)` at line 166 but the lambda `input_handler` at line 161 is never connected to anything (it's defined but not used as a signal callback). This is dead code from an incomplete placeholder implementation.
  </action>
  <verify>
  1. Read the modified file to confirm `_show_game_start_placeholder` is gone
  2. Confirm `_on_difficulty_selected` ends with `get_tree().change_scene_to_file("res://world/zones/neighborhood.tscn")`
  3. No references to "placeholder" or "Game would start here" remain in the file
  </verify>
  <done>
  `_on_difficulty_selected()` calls `get_tree().change_scene_to_file("res://world/zones/neighborhood.tscn")` after `GameManager.reset_game()`. The placeholder function and all its dead code are removed. File is clean.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify all title screen paths work</name>
  <files>ui/menus/title_screen.gd</files>
  <action>
  Review the three game entry paths in the title screen for correctness:

  1. **New Game path** (just fixed): `_on_new_game_pressed()` → shows difficulty selection → `_on_difficulty_selected()` → `GameManager.reset_game()` → `change_scene_to_file("res://world/zones/neighborhood.tscn")`. Confirm this is correct.

  2. **Continue path**: `_on_continue_pressed()` → `SaveManager.load_game()`. Check that SaveManager.load_game() handles scene transition (it should change to the saved zone). If it returns success but doesn't change scene, there's a bug to fix.

  3. **Quit path**: `_on_quit_pressed()` → `get_tree().quit()`. This is correct.

  Also verify: the pause menu quit (`ui/menus/pause_menu.gd` line 139-143) calls `GameManager.reset_game()` then `change_scene_to_file("res://ui/menus/title_screen.tscn")` — confirm this round-trip works (title screen → game → pause → quit → title screen → new game or continue).

  If any path has issues, fix them. If all paths are correct, log the verification.
  </action>
  <verify>
  1. New Game: calls change_scene_to_file to neighborhood after reset_game
  2. Continue: SaveManager.load_game() handles scene transition internally
  3. Quit: calls get_tree().quit()
  4. Pause menu quit: returns to title_screen.tscn correctly
  </verify>
  <done>
  All 3 title screen paths and the pause-to-title round-trip are verified working. No dead code or placeholder stubs remain.
  </done>
</task>

</tasks>

<verification>
- `title_screen.gd` has no placeholder code, no "Game would start here" text
- New Game flow ends with scene transition to neighborhood zone
- Continue flow loads saved game and transitions to saved zone
- File compiles without errors (no syntax issues)
</verification>

<success_criteria>
A player launching the game for the first time can press New Game, select a difficulty, and land in the neighborhood zone ready to play. Existing saves can be continued. The title screen is reachable from the pause menu and works correctly on return.
</success_criteria>

<output>
After completion, create `docs/phases/43-title-screen-fix/43-01-SUMMARY.md`
</output>
