---
phase: 20-mini-bosses
plan: 02
type: execute
wave: 2
depends_on: ["20-01"]
files_modified:
  - characters/enemies/alpha_raccoon.gd
  - characters/enemies/alpha_raccoon.tscn
  - characters/enemies/states/alpha_slam.gd
  - characters/enemies/states/alpha_summon.gd
  - world/zones/neighborhood.gd
autonomous: true

must_haves:
  truths:
    - "Player encounters Alpha Raccoon in Neighborhood via area trigger"
    - "Alpha Raccoon has ground slam AoE attack and raccoon reinforcement summon"
    - "Alpha Raccoon has 120 HP, cycles between 2 attack patterns"
    - "Defeating Alpha Raccoon grants Raccoon Crown equipment"
    - "Alpha Raccoon does not respawn after defeat (per save)"
    - "Mini-boss health bar shows 'ALPHA RACCOON' during fight"
  artifacts:
    - path: "characters/enemies/alpha_raccoon.gd"
      provides: "Alpha Raccoon mini-boss class"
      contains: "class_name AlphaRaccoon"
    - path: "characters/enemies/alpha_raccoon.tscn"
      provides: "Alpha Raccoon scene with states"
      contains: "AlphaSlam"
    - path: "characters/enemies/states/alpha_slam.gd"
      provides: "Ground slam AoE attack state"
      contains: "class_name AlphaSlam"
    - path: "characters/enemies/states/alpha_summon.gd"
      provides: "Raccoon reinforcement summon attack state"
      contains: "class_name AlphaSummon"
    - path: "world/zones/neighborhood.gd"
      provides: "Mini-boss trigger area in neighborhood"
      contains: "_build_mini_boss_trigger"
  key_links:
    - from: "characters/enemies/alpha_raccoon.gd"
      to: "characters/enemies/mini_boss_base.gd"
      via: "extends MiniBossBase"
      pattern: 'extends.*mini_boss_base'
    - from: "world/zones/neighborhood.gd"
      to: "autoloads/game_manager.gd"
      via: "GameManager.mini_bosses_defeated check before spawning trigger"
      pattern: "mini_bosses_defeated"
    - from: "characters/enemies/states/alpha_slam.gd"
      to: "HealthComponent"
      via: "AoE damage to player"
      pattern: "take_damage"
---

<objective>
Create the Alpha Raccoon mini-boss for the Neighborhood zone — a larger, tougher raccoon with ground slam AoE and raccoon reinforcement summoning. Add area trigger in Neighborhood zone that spawns the mini-boss on player entry.

Purpose: First of 3 zone-specific mini-bosses providing optional challenge + rare loot for replayability.
Output: Playable Alpha Raccoon encounter in Neighborhood zone.
</objective>

<execution_context>
@~/.config/Claude/get-shit-done/workflows/execute-plan.md
@~/.config/Claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-mini-bosses/20-RESEARCH.md
@.planning/phases/20-mini-bosses/20-01-SUMMARY.md

Key source files:
@characters/enemies/mini_boss_base.gd — MiniBossBase to extend (from Plan 01)
@characters/enemies/states/mini_boss_idle.gd — MiniBossIdle state (from Plan 01)
@characters/enemies/boss_raccoon_king.gd — boss pattern reference
@characters/enemies/boss_raccoon_king.tscn — boss scene structure reference
@characters/enemies/states/boss_attack_swipe.gd — WINDUP→ACTIVE→RECOVERY phase pattern
@characters/enemies/states/boss_attack_summon.gd — summon pattern reference
@characters/enemies/raccoon.gd — regular raccoon for summoning
@characters/enemies/raccoon.tscn — raccoon scene to preload for summoning
@world/zones/neighborhood.gd — zone to add trigger to
@components/state_machine/state.gd — State base class (var player)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Alpha Raccoon class, AlphaSlam state, and AlphaSummon state</name>
  <files>
    characters/enemies/alpha_raccoon.gd
    characters/enemies/states/alpha_slam.gd
    characters/enemies/states/alpha_summon.gd
  </files>
  <action>
**1. Create `characters/enemies/states/alpha_slam.gd` — Ground Slam AoE:**

Follow the WINDUP→ACTIVE→RECOVERY phase pattern from BossAttackSwipe. Uses `player.` convention (matching all regular enemy states).

```gdscript
extends State
class_name AlphaSlam
## Alpha Raccoon ground slam - AoE damage in a circle around the boss.
## Phase: TELEGRAPH (0.5s) → LEAP (0.3s) → IMPACT (0.1s) → RECOVERY (0.6s)

const TELEGRAPH_TIME: float = 0.5
const LEAP_TIME: float = 0.3
const IMPACT_TIME: float = 0.1
const RECOVERY_TIME: float = 0.6
const AOE_RADIUS: float = 40.0

var timer: float = 0.0
enum Phase { TELEGRAPH, LEAP, IMPACT, RECOVERY }
var current_phase: Phase = Phase.TELEGRAPH

func enter() -> void:
    timer = 0.0
    current_phase = Phase.TELEGRAPH
    player.velocity = Vector2.ZERO
    # Warning visual — red-orange tint
    if player.sprite:
        player.sprite.modulate = Color(1.3, 0.9, 0.8)

func exit() -> void:
    if player.hitbox:
        player.hitbox.disable()
    if player.sprite:
        player.sprite.modulate = Color.WHITE
        player.sprite.position = Vector2.ZERO

func physics_update(delta: float) -> void:
    timer += delta
    match current_phase:
        Phase.TELEGRAPH:
            # Shake sprite to telegraph incoming slam
            if player.sprite:
                player.sprite.position.x = randf_range(-2, 2)
            if timer >= TELEGRAPH_TIME:
                current_phase = Phase.LEAP
                timer = 0.0
                _start_leap()
        Phase.LEAP:
            if timer >= LEAP_TIME:
                current_phase = Phase.IMPACT
                timer = 0.0
                _do_impact()
        Phase.IMPACT:
            if timer >= IMPACT_TIME:
                current_phase = Phase.RECOVERY
                timer = 0.0
        Phase.RECOVERY:
            if timer >= RECOVERY_TIME:
                state_machine.transition_to("MiniBossIdle")

func _start_leap() -> void:
    if player.sprite:
        player.sprite.position = Vector2.ZERO
        # Jump up animation
        var tween = create_tween()
        tween.tween_property(player.sprite, "position:y", -12.0, LEAP_TIME * 0.5)
        tween.tween_property(player.sprite, "position:y", 0.0, LEAP_TIME * 0.5)

func _do_impact() -> void:
    EffectsManager.screen_shake(8.0, 0.3)
    
    # Damage player if within AoE radius
    var player_node = player.get_tree().get_first_node_in_group("player")
    if player_node:
        var dist = player.global_position.distance_to(player_node.global_position)
        if dist <= AOE_RADIUS:
            var hc = player_node.get_node_or_null("HealthComponent")
            if hc:
                hc.take_damage(player.attack_damage)
    
    # Damage companions too
    for companion in player.get_tree().get_nodes_in_group("companions"):
        if is_instance_valid(companion):
            var dist = player.global_position.distance_to(companion.global_position)
            if dist <= AOE_RADIUS:
                var hc = companion.get_node_or_null("HealthComponent")
                if hc:
                    hc.take_damage(player.attack_damage)
    
    # Spawn visual shockwave
    _spawn_slam_visual()

func _spawn_slam_visual() -> void:
    # Expanding circle that fades — shows AoE radius
    var circle = Polygon2D.new()
    var points: PackedVector2Array = []
    for i in range(16):
        var angle = i * TAU / 16.0
        points.append(Vector2(cos(angle), sin(angle)) * 5.0)  # Start small
    circle.polygon = points
    circle.color = Color(0.8, 0.4, 0.2, 0.6)  # Orange shockwave
    circle.global_position = player.global_position
    circle.z_index = 5
    player.get_parent().add_child(circle)
    
    # Expand and fade
    var tween = create_tween()
    tween.set_parallel(true)
    tween.tween_property(circle, "scale", Vector2(AOE_RADIUS / 5.0, AOE_RADIUS / 5.0), 0.3)
    tween.tween_property(circle, "modulate:a", 0.0, 0.4)
    tween.chain().tween_callback(circle.queue_free)
```

**2. Create `characters/enemies/states/alpha_summon.gd` — Raccoon Reinforcements:**

Based on BossAttackSummon pattern. Spawns 1-2 raccoons, tracks them in MiniBossBase.spawned_minions.

```gdscript
extends State
class_name AlphaSummon
## Alpha Raccoon summon - calls raccoon reinforcements.
## Phase: SUMMON_CHARGE (0.6s) → SUMMON (instant) → RECOVERY (0.8s)

const CHARGE_TIME: float = 0.6
const RECOVERY_TIME: float = 0.8
const MAX_MINIONS: int = 3  # Cap total alive minions

var timer: float = 0.0
var summoned: bool = false
enum Phase { CHARGE, SUMMON, RECOVERY }
var current_phase: Phase = Phase.CHARGE

func enter() -> void:
    timer = 0.0
    summoned = false
    current_phase = Phase.CHARGE
    player.velocity = Vector2.ZERO
    # Blue-purple glow during charge
    if player.sprite:
        player.sprite.modulate = Color(0.8, 0.7, 1.2)

func exit() -> void:
    if player.sprite:
        player.sprite.modulate = Color.WHITE

func physics_update(delta: float) -> void:
    timer += delta
    match current_phase:
        Phase.CHARGE:
            # Pulse sprite
            if player.sprite:
                player.sprite.position.x = randf_range(-1, 1)
            if timer >= CHARGE_TIME:
                current_phase = Phase.SUMMON
                timer = 0.0
                _do_summon()
        Phase.SUMMON:
            current_phase = Phase.RECOVERY
            timer = 0.0
        Phase.RECOVERY:
            if timer >= RECOVERY_TIME:
                state_machine.transition_to("MiniBossIdle")

func _do_summon() -> void:
    if player.sprite:
        player.sprite.position = Vector2.ZERO
    
    # Count living minions
    var alive_count = 0
    if player.has_method("get") or "spawned_minions" in player:
        for minion in player.spawned_minions:
            if is_instance_valid(minion) and minion.is_alive():
                alive_count += 1
    
    # Don't exceed cap
    var spawn_count = mini(2, MAX_MINIONS - alive_count)
    if spawn_count <= 0:
        return
    
    var raccoon_scene = load("res://characters/enemies/raccoon.tscn")
    if not raccoon_scene:
        return
    
    for i in range(spawn_count):
        var raccoon = raccoon_scene.instantiate()
        var offset = Vector2(randf_range(-30, 30), randf_range(-30, 30))
        raccoon.global_position = player.global_position + offset
        player.get_parent().add_child(raccoon)
        
        # Track for cleanup on boss death
        if "spawned_minions" in player:
            player.spawned_minions.append(raccoon)
        
        # Spawn poof effect
        _spawn_poof(raccoon.global_position)
    
    EffectsManager.screen_shake(4.0, 0.15)

func _spawn_poof(pos: Vector2) -> void:
    for j in range(6):
        var particle = ColorRect.new()
        particle.size = Vector2(4, 4)
        particle.color = Color(0.5, 0.45, 0.6, 0.8)
        particle.global_position = pos
        player.get_parent().add_child(particle)
        
        var angle = j * TAU / 6
        var end_pos = pos + Vector2(cos(angle), sin(angle)) * 15
        
        var tween = create_tween()
        tween.set_parallel(true)
        tween.tween_property(particle, "global_position", end_pos, 0.3)
        tween.tween_property(particle, "modulate:a", 0.0, 0.3)
        tween.chain().tween_callback(particle.queue_free)
```

**3. Create `characters/enemies/alpha_raccoon.gd`:**

```gdscript
extends "res://characters/enemies/mini_boss_base.gd"
class_name AlphaRaccoon
## Alpha Raccoon - Neighborhood mini-boss.
## 120 HP, ground slam AoE + raccoon reinforcement summon.
## Larger, darker raccoon with crown. Drops Raccoon Crown on defeat.

# =============================================================================
# LIFECYCLE
# =============================================================================

func _ready() -> void:
    # Stats — set BEFORE super._ready() per enemy extension pattern
    patrol_speed = 35.0
    chase_speed = 70.0
    detection_range = 120.0
    attack_range = 35.0
    lose_interest_range = 250.0  # Large range — don't lose interest easily
    attack_damage = 20
    attack_cooldown = 1.5
    knockback_force = 100.0
    exp_value = 100
    
    # Mini-boss config
    boss_name = "ALPHA RACCOON"
    is_defeated_key = "alpha_raccoon"
    loot_equipment_id = "raccoon_crown"
    attack_patterns = ["AlphaSlam", "AlphaSummon"]
    
    super._ready()
    
    # Override health AFTER super._ready() (EnemyBase initializes HealthComponent)
    if health:
        health.max_health = 120
        health.current_health = 120
    
    # Bigger raccoon (1.8x scale)
    if sprite:
        sprite.scale = Vector2(1.8, 1.8)
        sprite.color = Color(0.35, 0.3, 0.4)  # Dark purple-grey
    
    _setup_alpha_appearance()

# =============================================================================
# APPEARANCE
# =============================================================================

func _setup_alpha_appearance() -> void:
    if not sprite:
        return
    
    # Crown on top (gold triangle points)
    var crown = Polygon2D.new()
    crown.polygon = PackedVector2Array([
        Vector2(-4, -8),
        Vector2(-2, -12),
        Vector2(0, -9),
        Vector2(2, -12),
        Vector2(4, -8)
    ])
    crown.color = Color(1, 0.85, 0.2)  # Gold
    sprite.add_child(crown)
    
    # Scar across face (battle-worn look)
    var scar = Polygon2D.new()
    scar.polygon = PackedVector2Array([
        Vector2(-3, -3),
        Vector2(-2, -4),
        Vector2(3, 1),
        Vector2(2, 2),
    ])
    scar.color = Color(0.5, 0.3, 0.3, 0.6)
    sprite.add_child(scar)

# =============================================================================
# DROPS
# =============================================================================

func _init_default_drops() -> void:
    drop_table = [
        {"scene": COIN_PICKUP_SCENE, "chance": 1.0, "min": 5, "max": 10},
        {"scene": HEALTH_PICKUP_SCENE, "chance": 1.0, "min": 2, "max": 3},
    ]
```
  </action>
  <verify>
1. Verify `characters/enemies/alpha_raccoon.gd` extends mini_boss_base.gd and has `class_name AlphaRaccoon`
2. Verify `characters/enemies/states/alpha_slam.gd` has Phase enum and AoE damage logic
3. Verify `characters/enemies/states/alpha_summon.gd` loads raccoon.tscn and tracks spawned_minions
4. All three files use `player.` (NOT `enemy.`) for entity reference
5. Alpha Raccoon sets stats BEFORE super._ready() and health AFTER
6. Attack patterns = ["AlphaSlam", "AlphaSummon"] — matches state node names
  </verify>
  <done>
Alpha Raccoon class, AlphaSlam AoE state, and AlphaSummon reinforcement state are complete.
  </done>
</task>

<task type="auto">
  <name>Task 2: Alpha Raccoon scene file and Neighborhood zone trigger</name>
  <files>
    characters/enemies/alpha_raccoon.tscn
    world/zones/neighborhood.gd
  </files>
  <action>
**1. Create `characters/enemies/alpha_raccoon.tscn`:**

Model after `boss_raccoon_king.tscn` — same node structure with mini-boss-specific states. The scene must have:
- Root: CharacterBody2D with alpha_raccoon.gd script
- Sprite2D (Polygon2D) — programmatic visual
- CollisionShape2D — capsule body
- AnimationPlayer
- StateMachine with states: MiniBossIdle (initial), AlphaSlam, AlphaSummon, Chase (EnemyChase), Hurt (EnemyHurt), Death (EnemyDeath)
- DetectionArea (Area2D, collision_mask = 2 for player)
- Hitbox (Area2D with hitbox.gd)
- Hurtbox (Area2D with hurtbox.gd)
- HealthComponent

Write the .tscn file programmatically. Here's the exact content:

```tscn
[gd_scene load_steps=14 format=3 uid="uid://alpha_raccoon_001"]

[ext_resource type="Script" path="res://characters/enemies/alpha_raccoon.gd" id="1_alpha"]
[ext_resource type="Script" path="res://components/state_machine/state_machine.gd" id="2_sm"]
[ext_resource type="Script" path="res://characters/enemies/states/mini_boss_idle.gd" id="3_idle"]
[ext_resource type="Script" path="res://characters/enemies/states/alpha_slam.gd" id="4_slam"]
[ext_resource type="Script" path="res://characters/enemies/states/alpha_summon.gd" id="5_summon"]
[ext_resource type="Script" path="res://characters/enemies/states/enemy_chase.gd" id="6_chase"]
[ext_resource type="Script" path="res://characters/enemies/states/enemy_hurt.gd" id="7_hurt"]
[ext_resource type="Script" path="res://characters/enemies/states/enemy_death.gd" id="8_death"]
[ext_resource type="Script" path="res://components/hitbox/hitbox.gd" id="9_hitbox"]
[ext_resource type="Script" path="res://components/hurtbox/hurtbox.gd" id="10_hurtbox"]
[ext_resource type="Script" path="res://components/health/health_component.gd" id="11_health"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_body"]
radius = 10.0
height = 24.0

[sub_resource type="CircleShape2D" id="CircleShape2D_detection"]
radius = 120.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hitbox"]
size = Vector2(20, 16)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_hurtbox"]
radius = 12.0
height = 28.0

[node name="AlphaRaccoon" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 1
script = ExtResource("1_alpha")

[node name="Sprite2D" type="Polygon2D" parent="."]
color = Color(0.35, 0.3, 0.4, 1)
polygon = PackedVector2Array(-7, -7, 7, -7, 7, 7, -7, 7)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 4)
shape = SubResource("CapsuleShape2D_body")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("2_sm")
initial_state_path = NodePath("MiniBossIdle")

[node name="MiniBossIdle" type="Node" parent="StateMachine"]
script = ExtResource("3_idle")

[node name="AlphaSlam" type="Node" parent="StateMachine"]
script = ExtResource("4_slam")

[node name="AlphaSummon" type="Node" parent="StateMachine"]
script = ExtResource("5_summon")

[node name="Chase" type="Node" parent="StateMachine"]
script = ExtResource("6_chase")

[node name="Hurt" type="Node" parent="StateMachine"]
script = ExtResource("7_hurt")

[node name="Death" type="Node" parent="StateMachine"]
script = ExtResource("8_death")

[node name="DetectionArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource("CircleShape2D_detection")

[node name="Hitbox" type="Area2D" parent="."]
collision_layer = 128
collision_mask = 16
monitoring = false
monitorable = false
script = ExtResource("9_hitbox")
damage = 20

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
position = Vector2(16, 0)
shape = SubResource("RectangleShape2D_hitbox")
disabled = true

[node name="Hurtbox" type="Area2D" parent="."]
collision_layer = 32
collision_mask = 64
script = ExtResource("10_hurtbox")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(0, 4)
shape = SubResource("CapsuleShape2D_hurtbox")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("11_health")
max_health = 120
```

NOTE: The `load_steps` count should be `15` (11 ext_resources + 4 sub_resources). Adjust if Godot reports a warning — it's non-blocking.

**2. Update `world/zones/neighborhood.gd` — Add mini-boss trigger:**

Add a constant for the Alpha Raccoon scene at the top of the file (after `extends BaseZone` declaration):
```gdscript
const ALPHA_RACCOON_SCENE = preload("res://characters/enemies/alpha_raccoon.tscn")
```

Add a call to `_build_mini_boss_trigger()` in `_setup_zone()` (after `_build_manhole()`):
```gdscript
func _setup_zone() -> void:
    zone_id = "neighborhood"
    
    # Build manhole entrance to sewers
    _build_manhole()
    
    # Build mini-boss trigger (Alpha Raccoon)
    _build_mini_boss_trigger()
    
    # ... rest of _setup_zone unchanged ...
```

Add the trigger builder function (after `_build_manhole()` function, before end of file):

```gdscript
# =============================================================================
# MINI-BOSS TRIGGER (Alpha Raccoon)
# =============================================================================

## Mini-boss spawn tracking (once per zone load)
var _alpha_raccoon_spawned: bool = false

func _build_mini_boss_trigger() -> void:
    # Check if already defeated in save
    if GameManager.mini_bosses_defeated.get("alpha_raccoon", false):
        return  # Don't build trigger — already defeated
    
    var trigger_pos = Vector2(150, 480)  # Park area — open space for fight
    
    # Warning decor — skull-like marking on ground
    var warning = Polygon2D.new()
    warning.name = "MiniBossWarning"
    var points: PackedVector2Array = []
    for i in range(8):
        var angle = i * TAU / 8.0
        points.append(Vector2(cos(angle), sin(angle)) * 20.0)
    warning.polygon = points
    warning.color = Color(0.6, 0.2, 0.2, 0.3)  # Faint red circle
    warning.position = trigger_pos
    warning.z_index = 0
    add_child(warning)
    
    # Trigger Area2D
    var trigger = Area2D.new()
    trigger.name = "AlphaRaccoonTrigger"
    trigger.collision_layer = 0
    trigger.collision_mask = 2  # Player layer
    trigger.position = trigger_pos
    add_child(trigger)
    
    var shape = CollisionShape2D.new()
    var rect = RectangleShape2D.new()
    rect.size = Vector2(80, 60)
    shape.shape = rect
    trigger.add_child(shape)
    
    trigger.body_entered.connect(_on_alpha_raccoon_trigger)

func _on_alpha_raccoon_trigger(body: Node2D) -> void:
    if not body.is_in_group("player"):
        return
    if _alpha_raccoon_spawned:
        return
    if GameManager.mini_bosses_defeated.get("alpha_raccoon", false):
        return
    
    _alpha_raccoon_spawned = true
    
    # Spawn Alpha Raccoon
    var boss = ALPHA_RACCOON_SCENE.instantiate()
    boss.global_position = Vector2(150, 460)  # Slightly above trigger center
    add_child(boss)
    
    # Remove trigger and warning after spawn
    var trigger_node = get_node_or_null("AlphaRaccoonTrigger")
    if trigger_node:
        trigger_node.queue_free()
    var warning_node = get_node_or_null("MiniBossWarning")
    if warning_node:
        # Fade warning out
        var tween = create_tween()
        tween.tween_property(warning_node, "modulate:a", 0.0, 0.5)
        tween.tween_callback(warning_node.queue_free)
    
    # Play boss music
    if AudioManager.has_method("play_music"):
        AudioManager.play_music("boss_fight_b")
```

**Important positioning notes:**
- Trigger at (150, 480) — this is the park area in Neighborhood (per spawn_points "park_center" at (150, 480))
- Open space suitable for the fight — no obstacles
- Boss spawns at (150, 460) slightly north of trigger center
  </action>
  <verify>
1. `characters/enemies/alpha_raccoon.tscn` exists and can be loaded in Godot without errors
2. The scene has StateMachine with MiniBossIdle, AlphaSlam, AlphaSummon, Chase, Hurt, Death states
3. `world/zones/neighborhood.gd` has `_build_mini_boss_trigger()` and preloads alpha_raccoon.tscn
4. The trigger checks `GameManager.mini_bosses_defeated.get("alpha_raccoon", false)` before building
5. Run the game, enter Neighborhood, walk to park area (150, 480) — Alpha Raccoon should spawn
6. Mini-boss health bar should show "ALPHA RACCOON" with orange fill
7. Kill the Alpha Raccoon — "Got Raccoon Crown!" notification should appear
8. Save and reload — Alpha Raccoon should NOT spawn again
  </verify>
  <done>
Alpha Raccoon scene exists with all states wired. Neighborhood zone has area trigger at park area that spawns mini-boss on player entry, checks defeat flag, plays boss music, and cleans up trigger after spawn.
  </done>
</task>

</tasks>

<verification>
1. Alpha Raccoon spawns in Neighborhood park area when player enters trigger zone
2. Ground slam AoE hits player within radius, shows expanding circle visual, screen shake
3. Raccoon reinforcements spawn (max 3), tracked for cleanup on death
4. Mini-boss health bar shows "ALPHA RACCOON" in orange
5. Attack patterns cycle: AlphaSlam → AlphaSummon → AlphaSlam → ...
6. On death: "Got Raccoon Crown!" notification, coins + health drop, death particle burst
7. After defeat + save: Alpha Raccoon doesn't respawn in Neighborhood
8. Regular Neighborhood functionality (shop, enemies, manhole) unaffected
</verification>

<success_criteria>
- Complete Alpha Raccoon fight from trigger entry through defeat
- 120 HP, 2 distinct attack patterns with visual telegraph
- Loot drop (Raccoon Crown) appears in equipment inventory
- One-time defeat persists across save/load
- No interference with existing Neighborhood zone features
</success_criteria>

<output>
After completion, create `.planning/phases/20-mini-bosses/20-02-SUMMARY.md`
</output>
