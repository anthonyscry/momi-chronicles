---
phase: 29-signal-integrity
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - autoloads/events.gd
autonomous: true

must_haves:
  truths:
    - "Every Events bus signal either has at least one connection or has a doc comment explaining its future purpose"
    - "Truly dead signals (no emitter AND no consumer, or redundant with local signals) are removed"
    - "Remaining orphaned signals have descriptive future-hook comments"
  artifacts:
    - path: "autoloads/events.gd"
      provides: "Cleaned signal bus with doc comments on orphaned signals and dead signals removed"
      contains: "## Future hook"
  key_links:
    - from: "autoloads/events.gd"
      to: "codebase"
      via: "signal connections"
      pattern: "signal "
---

<objective>
Audit all 11 orphaned Events bus signals — add doc comments to useful future hooks, remove truly pointless ones.

Purpose: Clean up signal bus so every signal is either connected or clearly documented as intentional future hook. Reduces confusion for future development.

Output: Updated events.gd with either connections, doc comments, or removals for all orphaned signals.
</objective>

<execution_context>
@~/.config/Claude/get-shit-done/workflows/execute-plan.md
@~/.config/Claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@autoloads/events.gd
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and classify all 11 orphaned signals</name>
  <files>autoloads/events.gd</files>
  <action>
The audit has identified 11 orphaned Events bus signals. After Plan 01 wires 3 of them (save_corrupted, game_loaded, game_restarted), 8 remain. But since Plan 01 and Plan 02 run in parallel (Wave 1), handle all 11 here with doc comments — Plan 01's wiring makes 3 of them no longer orphaned, but the doc comments won't hurt.

For each orphaned signal, decide KEEP (with doc comment) or REMOVE based on these criteria:
- KEEP if the signal is emitted somewhere AND could plausibly drive future features
- REMOVE if the signal is redundant (local signal already covers it) or purely speculative with no emitter

**Classification (based on codebase analysis):**

1. **`stats_updated`** — KEEP. Emitted in player.gd on level up. Future hook: could drive stat display UI, achievement tracking, or companion stat sync.
   - Add comment: `## Future hook — emitted on level-up stat changes. Could drive stat sheet UI, achievement tracking, or companion scaling.`

2. **`zone_exited`** — KEEP. Emitted in GameManager on zone transition. Future hook: could drive zone-exit cleanup, analytics, or "time spent in zone" tracking.
   - Add comment: `## Future hook — emitted before zone transition. Could drive cleanup tasks, play-time tracking, or zone-exit save triggers.`

3. **`player_block_ended`** — KEEP. Emitted in player_block.gd. Future hook: could drive audio (shield-down sound), visual effects, or AI reactions.
   - Add comment: `## Future hook — emitted when block released. Could drive shield-lower SFX, visual effects, or enemy AI reaction windows.`

4. **`player_guard_broken`** — KEEP. Emitted in guard_component.gd. Future hook: guard break is a significant combat event — could drive dramatic sound/visual, enemy aggression increase, or achievement.
   - Add comment: `## Future hook — guard meter depleted. Could drive guard-break SFX, stagger animation, enemy aggro spike, or achievement.`

5. **`ring_menu_closed`** — KEEP. Emitted in ring_menu.gd. Future hook: paired with ring_menu_opened (which IS connected). Resume game state, re-show hidden UI.
   - Add comment: `## Future hook — paired with ring_menu_opened. Could re-show hidden HUD elements or resume gameplay effects on menu close.`

6. **`ring_item_selected`** — REMOVE. The ring_menu.gd already handles item selection internally via direct calls to Inventory.use_item(), EquipmentManager, and PartyManager. This Events bus signal is redundant — nothing external needs to know about ring menu selections. It was likely added speculatively.
   - Remove the signal declaration and the emit call in ring_menu.gd

7. **`equipment_changed` (Events bus)** — KEEP. Emitted in equipment_manager.gd. Future hook: could drive inventory UI refresh, paper-doll display, or stat comparison tooltips. The local equipment_manager.equipment_changed signal is used by player.gd, but the Events bus version could serve broader UI.
   - Add comment: `## Future hook — broadcast when equipment slot changes. Could drive inventory UI refresh, paper-doll display, or stat comparisons.`

8. **`pickup_collected`** — KEEP. Emitted by coin_pickup.gd and health_pickup.gd. Future hook: could drive collection statistics, achievements ("collect 100 coins"), or tutorial triggers.
   - Add comment: `## Future hook — emitted on any pickup collection. Could drive collection stats, achievements, or tutorial triggers.`

9. **`save_corrupted`** — Plan 01 wires this. Add doc comment anyway: `## Emitted if save file is corrupt — handled by title screen warning UI`

10. **`game_loaded`** — Plan 01 wires this. Add doc comment anyway: `## Emitted when game is loaded — handled by HUD refresh`

11. **`game_restarted`** — Plan 01 clears state in restart_game(). The signal itself remains for external listeners. Add doc comment: `## Emitted when game restarts — temporary state cleared in GameManager.restart_game()`

**For the REMOVE (ring_item_selected):**
- Remove `signal ring_item_selected(ring_type: int, item: Dictionary)` from events.gd
- Remove the `Events.ring_item_selected.emit(current_ring, item)` call from ring_menu.gd

**Summary of changes to events.gd:**
- Update 10 signal doc comments to explain purpose/future use
- Remove 1 signal (ring_item_selected)

**Changes to ring_menu.gd:**
- Remove the `Events.ring_item_selected.emit(current_ring, item)` line (keep the rest of the selection handler intact)
  </action>
  <verify>
1. Read events.gd — confirm ring_item_selected signal is removed
2. Read events.gd — confirm all orphaned signals have "Future hook" or descriptive doc comments
3. Grep for `ring_item_selected` in ring_menu.gd — confirm the Events.ring_item_selected.emit line is removed
4. Count signals in events.gd — should be one fewer than before (was ~30 signals, now ~29)
  </verify>
  <done>
All 11 orphaned signals classified: 10 kept with descriptive doc comments explaining future purpose, 1 removed (ring_item_selected — redundant with internal ring_menu handling). Commit message lists the removed signal and why.
  </done>
</task>

</tasks>

<verification>
1. Every signal in events.gd has a descriptive doc comment (## prefix)
2. No signal exists without either: (a) at least one .connect() in the codebase, or (b) a "Future hook" doc comment
3. ring_item_selected removed from both events.gd and ring_menu.gd
4. No other code references ring_item_selected (grep confirms)
</verification>

<success_criteria>
1. events.gd has descriptive doc comments on all remaining orphaned signals
2. ring_item_selected signal removed from events.gd and its emit removed from ring_menu.gd
3. No runtime errors introduced (signals that ARE connected still work)
</success_criteria>

<output>
After completion, create `.planning/phases/29-signal-integrity/29-02-SUMMARY.md`
</output>
