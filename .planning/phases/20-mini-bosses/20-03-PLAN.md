---
phase: 20-mini-bosses
plan: 03
type: execute
wave: 2
depends_on: ["20-01"]
files_modified:
  - characters/enemies/crow_matriarch.gd
  - characters/enemies/crow_matriarch.tscn
  - characters/enemies/states/crow_dive_bomb.gd
  - characters/enemies/states/crow_swarm_summon.gd
  - world/zones/backyard.gd
autonomous: true

must_haves:
  truths:
    - "Player encounters Crow Matriarch in Backyard via area trigger"
    - "Crow Matriarch has dive bomb attack and crow swarm summon"
    - "Crow Matriarch has 80 HP, cycles between 2 attack patterns"
    - "Defeating Crow Matriarch grants Crow Feather Coat equipment"
    - "Crow Matriarch does not respawn after defeat (per save)"
    - "Mini-boss health bar shows 'CROW MATRIARCH' during fight"
  artifacts:
    - path: "characters/enemies/crow_matriarch.gd"
      provides: "Crow Matriarch mini-boss class"
      contains: "class_name CrowMatriarch"
    - path: "characters/enemies/crow_matriarch.tscn"
      provides: "Crow Matriarch scene with states"
      contains: "CrowDiveBomb"
    - path: "characters/enemies/states/crow_dive_bomb.gd"
      provides: "Dive bomb attack state"
      contains: "class_name CrowDiveBomb"
    - path: "characters/enemies/states/crow_swarm_summon.gd"
      provides: "Crow swarm summon attack state"
      contains: "class_name CrowSwarmSummon"
    - path: "world/zones/backyard.gd"
      provides: "Mini-boss trigger area in backyard"
      contains: "_build_mini_boss_trigger"
  key_links:
    - from: "characters/enemies/crow_matriarch.gd"
      to: "characters/enemies/mini_boss_base.gd"
      via: "extends MiniBossBase"
      pattern: 'extends.*mini_boss_base'
    - from: "world/zones/backyard.gd"
      to: "autoloads/game_manager.gd"
      via: "GameManager.mini_bosses_defeated check"
      pattern: "mini_bosses_defeated"
    - from: "characters/enemies/states/crow_dive_bomb.gd"
      to: "HealthComponent"
      via: "Direct damage on dive impact"
      pattern: "take_damage"
---

<objective>
Create the Crow Matriarch mini-boss for the Backyard zone — an agile aerial boss with dive bomb attack and crow swarm summoning. Add area trigger in Backyard zone.

Purpose: Second zone-specific mini-boss, rewards Crow Feather Coat (Speed+Defense). Tests a different combat pattern: fast, evasive, aerial-themed.
Output: Playable Crow Matriarch encounter in Backyard zone.
</objective>

<execution_context>
@~/.config/Claude/get-shit-done/workflows/execute-plan.md
@~/.config/Claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-mini-bosses/20-RESEARCH.md
@.planning/phases/20-mini-bosses/20-01-SUMMARY.md

Key source files:
@characters/enemies/mini_boss_base.gd — MiniBossBase to extend (from Plan 01)
@characters/enemies/states/mini_boss_idle.gd — MiniBossIdle state (from Plan 01)
@characters/enemies/boss_raccoon_king.tscn — scene structure reference
@characters/enemies/states/boss_attack_charge.gd — charge/linear movement pattern reference
@characters/enemies/states/boss_attack_summon.gd — summon pattern reference
@characters/enemies/crow.gd — regular crow for summoning
@characters/enemies/crow.tscn — crow scene to preload
@world/zones/backyard.gd — zone to add trigger to
@components/state_machine/state.gd — State base (var player)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Crow Matriarch class, CrowDiveBomb state, and CrowSwarmSummon state</name>
  <files>
    characters/enemies/crow_matriarch.gd
    characters/enemies/states/crow_dive_bomb.gd
    characters/enemies/states/crow_swarm_summon.gd
  </files>
  <action>
**1. Create `characters/enemies/states/crow_dive_bomb.gd` — Dive Bomb Attack:**

Ascend (become invulnerable), telegraph target, dive at high speed with damage. Based on BossAttackCharge linear movement pattern.

```gdscript
extends State
class_name CrowDiveBomb
## Crow Matriarch dive bomb - ascend, lock target, dive at high speed.
## Phase: ASCEND (0.4s) → TELEGRAPH (0.3s) → DIVE (0.4s) → RECOVERY (0.5s)

const ASCEND_TIME: float = 0.4
const TELEGRAPH_TIME: float = 0.3
const DIVE_TIME: float = 0.4
const RECOVERY_TIME: float = 0.5
const DIVE_SPEED: float = 280.0
const DIVE_DAMAGE_RADIUS: float = 18.0

var timer: float = 0.0
enum Phase { ASCEND, TELEGRAPH, DIVE, RECOVERY }
var current_phase: Phase = Phase.ASCEND
var dive_target: Vector2 = Vector2.ZERO
var dive_direction: Vector2 = Vector2.ZERO

func enter() -> void:
    timer = 0.0
    current_phase = Phase.ASCEND
    player.velocity = Vector2.ZERO
    _start_ascend()

func exit() -> void:
    if player.hitbox:
        player.hitbox.disable()
    if player.sprite:
        player.sprite.modulate = Color.WHITE
        player.sprite.position = Vector2.ZERO
        player.sprite.scale = Vector2(1.5, 1.5)  # Restore matriarch scale
    # Re-enable hurtbox
    if player.hurtbox:
        player.hurtbox.is_invincible = false

func physics_update(delta: float) -> void:
    timer += delta
    match current_phase:
        Phase.ASCEND:
            if timer >= ASCEND_TIME:
                current_phase = Phase.TELEGRAPH
                timer = 0.0
                _lock_target()
        Phase.TELEGRAPH:
            # Show ground indicator pulsing
            if timer >= TELEGRAPH_TIME:
                current_phase = Phase.DIVE
                timer = 0.0
                _start_dive()
        Phase.DIVE:
            # Move toward target at high speed
            player.velocity = dive_direction * DIVE_SPEED
            player.move_and_slide()
            
            # Check if close to target or time expired
            var dist = player.global_position.distance_to(dive_target)
            if dist < 10.0 or timer >= DIVE_TIME:
                current_phase = Phase.RECOVERY
                timer = 0.0
                _do_impact()
        Phase.RECOVERY:
            player.velocity = player.velocity.lerp(Vector2.ZERO, delta * 8.0)
            player.move_and_slide()
            if timer >= RECOVERY_TIME:
                state_machine.transition_to("MiniBossIdle")

func _start_ascend() -> void:
    # Fly up visual (sprite moves up, becomes semi-transparent)
    if player.sprite:
        player.sprite.modulate = Color(1.0, 1.0, 1.2, 0.7)
        var tween = create_tween()
        tween.tween_property(player.sprite, "position:y", -15.0, ASCEND_TIME)
    # Become invulnerable during ascend
    if player.hurtbox:
        player.hurtbox.is_invincible = true

func _lock_target() -> void:
    # Lock onto player's current position
    var player_node = player.get_tree().get_first_node_in_group("player")
    if player_node:
        dive_target = player_node.global_position
    else:
        dive_target = player.global_position + Vector2(0, 50)
    
    dive_direction = (dive_target - player.global_position).normalized()
    
    # Show ground indicator at target
    _spawn_target_indicator(dive_target)

func _start_dive() -> void:
    # Dive down visual
    if player.sprite:
        player.sprite.modulate = Color(1.3, 0.8, 0.8, 1.0)
        var tween = create_tween()
        tween.tween_property(player.sprite, "position:y", 0.0, DIVE_TIME * 0.5)
    # Enable hitbox during dive
    if player.hitbox:
        player.hitbox.damage = int(player.attack_damage * 1.5)  # Dive does 1.5x damage
        player.hitbox.enable()

func _do_impact() -> void:
    # Disable hitbox
    if player.hitbox:
        player.hitbox.disable()
    # Re-enable hurtbox (vulnerable during recovery)
    if player.hurtbox:
        player.hurtbox.is_invincible = false
    
    player.velocity = Vector2.ZERO
    EffectsManager.screen_shake(5.0, 0.2)
    
    # Impact visual — small dust cloud
    _spawn_impact_dust()

func _spawn_target_indicator(pos: Vector2) -> void:
    var indicator = Polygon2D.new()
    var points: PackedVector2Array = []
    for i in range(8):
        var angle = i * TAU / 8.0
        points.append(Vector2(cos(angle), sin(angle)) * 12.0)
    indicator.polygon = points
    indicator.color = Color(1.0, 0.3, 0.3, 0.4)  # Red target circle
    indicator.global_position = pos
    indicator.z_index = 0
    player.get_parent().add_child(indicator)
    
    # Pulse and fade
    var tween = create_tween()
    tween.tween_property(indicator, "modulate:a", 0.8, 0.15)
    tween.tween_property(indicator, "modulate:a", 0.3, 0.15)
    tween.tween_property(indicator, "modulate:a", 0.8, 0.15)
    tween.tween_callback(indicator.queue_free)

func _spawn_impact_dust() -> void:
    for i in range(6):
        var particle = ColorRect.new()
        particle.size = Vector2(3, 3)
        particle.color = Color(0.6, 0.55, 0.5, 0.7)
        particle.global_position = player.global_position
        player.get_parent().add_child(particle)
        
        var angle = i * TAU / 6
        var end_pos = player.global_position + Vector2(cos(angle), sin(angle)) * 20
        
        var tween = create_tween()
        tween.set_parallel(true)
        tween.tween_property(particle, "global_position", end_pos, 0.3)
        tween.tween_property(particle, "modulate:a", 0.0, 0.3)
        tween.chain().tween_callback(particle.queue_free)
```

**2. Create `characters/enemies/states/crow_swarm_summon.gd` — Crow Swarm:**

Spawns 3-4 crow enemies in circular formation. Cap at 4 alive minions.

```gdscript
extends State
class_name CrowSwarmSummon
## Crow Matriarch swarm summon - calls crows in circular formation.
## Phase: CHARGE (0.5s) → SUMMON (instant) → RECOVERY (0.7s)

const CHARGE_TIME: float = 0.5
const RECOVERY_TIME: float = 0.7
const CROW_COUNT_MIN: int = 3
const CROW_COUNT_MAX: int = 4
const MAX_MINIONS: int = 4

var timer: float = 0.0
var summoned: bool = false
enum Phase { CHARGE, SUMMON, RECOVERY }
var current_phase: Phase = Phase.CHARGE

func enter() -> void:
    timer = 0.0
    summoned = false
    current_phase = Phase.CHARGE
    player.velocity = Vector2.ZERO
    # Purple glow during charge
    if player.sprite:
        player.sprite.modulate = Color(0.9, 0.7, 1.3)

func exit() -> void:
    if player.sprite:
        player.sprite.modulate = Color.WHITE

func physics_update(delta: float) -> void:
    timer += delta
    match current_phase:
        Phase.CHARGE:
            if player.sprite:
                player.sprite.position.y = randf_range(-1, 1)
            if timer >= CHARGE_TIME:
                current_phase = Phase.SUMMON
                timer = 0.0
                _do_summon()
        Phase.SUMMON:
            current_phase = Phase.RECOVERY
            timer = 0.0
        Phase.RECOVERY:
            if timer >= RECOVERY_TIME:
                state_machine.transition_to("MiniBossIdle")

func _do_summon() -> void:
    if player.sprite:
        player.sprite.position = Vector2.ZERO
    
    # Count living minions
    var alive_count = 0
    if "spawned_minions" in player:
        for minion in player.spawned_minions:
            if is_instance_valid(minion) and minion.is_alive():
                alive_count += 1
    
    var spawn_count = mini(randi_range(CROW_COUNT_MIN, CROW_COUNT_MAX), MAX_MINIONS - alive_count)
    if spawn_count <= 0:
        return
    
    var crow_scene = load("res://characters/enemies/crow.tscn")
    if not crow_scene:
        return
    
    for i in range(spawn_count):
        var crow = crow_scene.instantiate()
        # Spawn in circle around matriarch
        var angle = i * TAU / spawn_count
        crow.global_position = player.global_position + Vector2(cos(angle), sin(angle)) * 25
        player.get_parent().add_child(crow)
        
        # Track for cleanup on boss death
        if "spawned_minions" in player:
            player.spawned_minions.append(crow)
        
        # Feather poof effect per crow
        _spawn_feather_poof(crow.global_position)
    
    EffectsManager.screen_shake(3.0, 0.15)

func _spawn_feather_poof(pos: Vector2) -> void:
    for j in range(4):
        var feather = ColorRect.new()
        feather.size = Vector2(3, 2)
        feather.color = Color(0.15, 0.12, 0.2, 0.8)  # Dark feather color
        feather.global_position = pos
        player.get_parent().add_child(feather)
        
        var angle = j * TAU / 4
        var end_pos = pos + Vector2(cos(angle), sin(angle)) * 12
        
        var tween = create_tween()
        tween.set_parallel(true)
        tween.tween_property(feather, "global_position", end_pos, 0.4)
        tween.tween_property(feather, "modulate:a", 0.0, 0.4)
        tween.chain().tween_callback(feather.queue_free)
```

**3. Create `characters/enemies/crow_matriarch.gd`:**

```gdscript
extends "res://characters/enemies/mini_boss_base.gd"
class_name CrowMatriarch
## Crow Matriarch - Backyard mini-boss.
## 80 HP, dive bomb attack + crow swarm summon.
## Larger, darker crow with feathered crown. Drops Crow Feather Coat on defeat.

# =============================================================================
# LIFECYCLE
# =============================================================================

func _ready() -> void:
    # Stats — set BEFORE super._ready()
    patrol_speed = 50.0
    chase_speed = 90.0
    detection_range = 130.0
    attack_range = 30.0
    lose_interest_range = 250.0
    attack_damage = 15
    attack_cooldown = 1.2
    knockback_force = 60.0
    exp_value = 80
    
    # Mini-boss config
    boss_name = "CROW MATRIARCH"
    is_defeated_key = "crow_matriarch"
    loot_equipment_id = "crow_feather_coat"
    attack_patterns = ["CrowDiveBomb", "CrowSwarmSummon"]
    
    super._ready()
    
    # Override health AFTER super._ready()
    if health:
        health.max_health = 80
        health.current_health = 80
    
    # Larger crow (1.5x scale)
    if sprite:
        sprite.scale = Vector2(1.5, 1.5)
        sprite.color = Color(0.1, 0.08, 0.15)  # Very dark purple-black
    
    _setup_matriarch_appearance()

# =============================================================================
# APPEARANCE
# =============================================================================

func _setup_matriarch_appearance() -> void:
    if not sprite:
        return
    
    # Feathered crest on top
    var crest = Polygon2D.new()
    crest.polygon = PackedVector2Array([
        Vector2(-2, -8),
        Vector2(0, -14),
        Vector2(2, -8),
        Vector2(1, -11),
        Vector2(-1, -11),
    ])
    crest.color = Color(0.2, 0.15, 0.3)  # Dark purple crest
    sprite.add_child(crest)
    
    # Glowing red eyes
    var left_eye = Polygon2D.new()
    left_eye.polygon = PackedVector2Array([
        Vector2(-3, -2), Vector2(-2, -3), Vector2(-1, -2), Vector2(-2, -1)
    ])
    left_eye.color = Color(1.0, 0.3, 0.2)  # Glowing red
    sprite.add_child(left_eye)
    
    var right_eye = Polygon2D.new()
    right_eye.polygon = PackedVector2Array([
        Vector2(1, -2), Vector2(2, -3), Vector2(3, -2), Vector2(2, -1)
    ])
    right_eye.color = Color(1.0, 0.3, 0.2)
    sprite.add_child(right_eye)

# =============================================================================
# DROPS
# =============================================================================

func _init_default_drops() -> void:
    drop_table = [
        {"scene": COIN_PICKUP_SCENE, "chance": 1.0, "min": 4, "max": 8},
        {"scene": HEALTH_PICKUP_SCENE, "chance": 1.0, "min": 2, "max": 3},
    ]
```

**Key differences from Alpha Raccoon:**
- Faster speed (90 chase vs 70), less HP (80 vs 120), lower damage (15 vs 20)
- Agile glass cannon — rewards dodging the dive bomb
- Dive bomb does 1.5x damage (22) and has invulnerability during ascend
- Crow swarm spawns 3-4 vs Alpha's 2 raccoons
  </action>
  <verify>
1. `characters/enemies/crow_matriarch.gd` extends mini_boss_base.gd, has `class_name CrowMatriarch`
2. `characters/enemies/states/crow_dive_bomb.gd` has 4-phase ASCEND→TELEGRAPH→DIVE→RECOVERY
3. `characters/enemies/states/crow_swarm_summon.gd` loads crow.tscn and spawns in circle
4. All state scripts use `player.` (not `enemy.`)
5. Attack patterns = ["CrowDiveBomb", "CrowSwarmSummon"]
6. Dive bomb makes the boss invulnerable during ascend (hurtbox.is_invincible)
  </verify>
  <done>
Crow Matriarch class, CrowDiveBomb aerial state, and CrowSwarmSummon state are complete with distinct combat personality (fast, evasive).
  </done>
</task>

<task type="auto">
  <name>Task 2: Crow Matriarch scene file and Backyard zone trigger</name>
  <files>
    characters/enemies/crow_matriarch.tscn
    world/zones/backyard.gd
  </files>
  <action>
**1. Create `characters/enemies/crow_matriarch.tscn`:**

Same structure as Alpha Raccoon scene but with CrowDiveBomb and CrowSwarmSummon states.

```tscn
[gd_scene load_steps=14 format=3 uid="uid://crow_matriarch_001"]

[ext_resource type="Script" path="res://characters/enemies/crow_matriarch.gd" id="1_crow"]
[ext_resource type="Script" path="res://components/state_machine/state_machine.gd" id="2_sm"]
[ext_resource type="Script" path="res://characters/enemies/states/mini_boss_idle.gd" id="3_idle"]
[ext_resource type="Script" path="res://characters/enemies/states/crow_dive_bomb.gd" id="4_dive"]
[ext_resource type="Script" path="res://characters/enemies/states/crow_swarm_summon.gd" id="5_swarm"]
[ext_resource type="Script" path="res://characters/enemies/states/enemy_chase.gd" id="6_chase"]
[ext_resource type="Script" path="res://characters/enemies/states/enemy_hurt.gd" id="7_hurt"]
[ext_resource type="Script" path="res://characters/enemies/states/enemy_death.gd" id="8_death"]
[ext_resource type="Script" path="res://components/hitbox/hitbox.gd" id="9_hitbox"]
[ext_resource type="Script" path="res://components/hurtbox/hurtbox.gd" id="10_hurtbox"]
[ext_resource type="Script" path="res://components/health/health_component.gd" id="11_health"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_body"]
radius = 8.0
height = 20.0

[sub_resource type="CircleShape2D" id="CircleShape2D_detection"]
radius = 130.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hitbox"]
size = Vector2(16, 14)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_hurtbox"]
radius = 10.0
height = 24.0

[node name="CrowMatriarch" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 1
script = ExtResource("1_crow")

[node name="Sprite2D" type="Polygon2D" parent="."]
color = Color(0.1, 0.08, 0.15, 1)
polygon = PackedVector2Array(-5, -5, 5, -5, 5, 5, -5, 5)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 3)
shape = SubResource("CapsuleShape2D_body")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("2_sm")
initial_state_path = NodePath("MiniBossIdle")

[node name="MiniBossIdle" type="Node" parent="StateMachine"]
script = ExtResource("3_idle")

[node name="CrowDiveBomb" type="Node" parent="StateMachine"]
script = ExtResource("4_dive")

[node name="CrowSwarmSummon" type="Node" parent="StateMachine"]
script = ExtResource("5_swarm")

[node name="Chase" type="Node" parent="StateMachine"]
script = ExtResource("6_chase")

[node name="Hurt" type="Node" parent="StateMachine"]
script = ExtResource("7_hurt")

[node name="Death" type="Node" parent="StateMachine"]
script = ExtResource("8_death")

[node name="DetectionArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource("CircleShape2D_detection")

[node name="Hitbox" type="Area2D" parent="."]
collision_layer = 128
collision_mask = 16
monitoring = false
monitorable = false
script = ExtResource("9_hitbox")
damage = 15

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
position = Vector2(14, 0)
shape = SubResource("RectangleShape2D_hitbox")
disabled = true

[node name="Hurtbox" type="Area2D" parent="."]
collision_layer = 32
collision_mask = 64
script = ExtResource("10_hurtbox")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(0, 3)
shape = SubResource("CapsuleShape2D_hurtbox")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("11_health")
max_health = 80
```

**2. Update `world/zones/backyard.gd` — Add mini-boss trigger:**

Add preload constant at top:
```gdscript
const CROW_MATRIARCH_SCENE = preload("res://characters/enemies/crow_matriarch.tscn")
```

Add `_build_mini_boss_trigger()` call in `_setup_zone()`:
```gdscript
func _setup_zone() -> void:
    zone_id = "backyard"
    
    # Build mini-boss trigger (Crow Matriarch)
    _build_mini_boss_trigger()
    
    # Check if we have a pending spawn from zone transition
    var pending_spawn = GameManager.get_pending_spawn()
    if not pending_spawn.is_empty() and spawn_points.has(pending_spawn):
        spawn_player_at(spawn_points[pending_spawn])
    elif spawn_points.has("default"):
        spawn_player_at(spawn_points["default"])
```

Add trigger function:
```gdscript
# =============================================================================
# MINI-BOSS TRIGGER (Crow Matriarch)
# =============================================================================

var _crow_matriarch_spawned: bool = false

func _build_mini_boss_trigger() -> void:
    # Check if already defeated
    if GameManager.mini_bosses_defeated.get("crow_matriarch", false):
        return
    
    var trigger_pos = Vector2(192, 108)  # Center of backyard zone
    
    # Warning decor — dark feather circle on ground
    var warning = Polygon2D.new()
    warning.name = "MiniBossWarning"
    var points: PackedVector2Array = []
    for i in range(8):
        var angle = i * TAU / 8.0
        points.append(Vector2(cos(angle), sin(angle)) * 18.0)
    warning.polygon = points
    warning.color = Color(0.2, 0.15, 0.3, 0.3)  # Faint dark purple
    warning.position = trigger_pos
    warning.z_index = 0
    add_child(warning)
    
    # Trigger Area2D
    var trigger = Area2D.new()
    trigger.name = "CrowMatriarchTrigger"
    trigger.collision_layer = 0
    trigger.collision_mask = 2
    trigger.position = trigger_pos
    add_child(trigger)
    
    var shape = CollisionShape2D.new()
    var rect = RectangleShape2D.new()
    rect.size = Vector2(70, 50)
    shape.shape = rect
    trigger.add_child(shape)
    
    trigger.body_entered.connect(_on_crow_matriarch_trigger)

func _on_crow_matriarch_trigger(body: Node2D) -> void:
    if not body.is_in_group("player"):
        return
    if _crow_matriarch_spawned:
        return
    if GameManager.mini_bosses_defeated.get("crow_matriarch", false):
        return
    
    _crow_matriarch_spawned = true
    
    var boss = CROW_MATRIARCH_SCENE.instantiate()
    boss.global_position = Vector2(192, 90)  # Slightly above center
    add_child(boss)
    
    # Remove trigger and warning
    var trigger_node = get_node_or_null("CrowMatriarchTrigger")
    if trigger_node:
        trigger_node.queue_free()
    var warning_node = get_node_or_null("MiniBossWarning")
    if warning_node:
        var tween = create_tween()
        tween.tween_property(warning_node, "modulate:a", 0.0, 0.5)
        tween.tween_callback(warning_node.queue_free)
    
    # Play boss music
    if AudioManager.has_method("play_music"):
        AudioManager.play_music("boss_fight_b")
```

**Positioning notes:**
- Backyard center is at (192, 108) — matching the "center" spawn point
- Smaller trigger area (70x50) since backyard is more confined than neighborhood
- Boss spawns slightly above center at (192, 90)
  </action>
  <verify>
1. `characters/enemies/crow_matriarch.tscn` loads without errors in Godot
2. Scene has StateMachine with MiniBossIdle, CrowDiveBomb, CrowSwarmSummon, Chase, Hurt, Death
3. `world/zones/backyard.gd` has `_build_mini_boss_trigger()` and preloads crow_matriarch.tscn
4. Trigger checks `GameManager.mini_bosses_defeated.get("crow_matriarch", false)` before building
5. Run game, enter Backyard, walk to center (192, 108) — Crow Matriarch spawns
6. Health bar shows "CROW MATRIARCH" with orange fill
7. Defeat Crow Matriarch — "Got Crow Feather Coat!" notification
8. Save/reload — Crow Matriarch doesn't respawn
  </verify>
  <done>
Crow Matriarch scene wired with all states. Backyard zone has trigger at center that spawns mini-boss, checks defeat flag, and cleans up after spawn.
  </done>
</task>

</tasks>

<verification>
1. Crow Matriarch spawns in Backyard center when player enters trigger zone
2. Dive bomb: ascend (invulnerable) → telegraph target (red circle) → dive at 280px/s → impact
3. Crow swarm: spawns 3-4 crows in circle formation, capped at 4 alive
4. 80 HP, fast (90 chase speed), lower damage (15 base, 22 on dive)
5. Death grants Crow Feather Coat + coin/health drops
6. One-time defeat persists across save/load
7. Backyard zone transitions and existing enemies unaffected
</verification>

<success_criteria>
- Complete Crow Matriarch fight with 2 distinct patterns
- Dive bomb has visible telegraph (red circle) and invulnerability window
- Summoned crows fight as normal enemies
- Crow Feather Coat in equipment inventory after defeat
- No backyard zone regressions
</success_criteria>

<output>
After completion, create `.planning/phases/20-mini-bosses/20-03-SUMMARY.md`
</output>
